"use strict";function resourceFactory(a){var b=a+"Api";angular.module("efg."+b,["ng"]).factory(b,["$q","$http",function(b,c){function d(){var d=b.defer();return e?d.resolve(e):c.get("data/"+a+".yml").then(function(a){e=jsyaml.load(a.data),d.resolve(e)}),d.promise}var e;return{query:d,get:function(a){var c=b.defer();return d().then(function(b){try{c.resolve(b[a])}catch(a){c.reject(a)}}),c.promise}}}])}function owncloudFactory(a,b,c){var d=a+"Api";angular.module("efg."+d,["efg.configurationApi","ng"]).factory(d,["$q","$http","configurationApi",function(d,e,f){function g(){var g=d.defer();return h?g.resolve(h):f.get("owncloud").then(function(d){var f=d.host,i=d.folders[a];e.get("http://"+f+"/index.php/apps/files_sharing/ajax/list.php?t="+i+"&dir=/"+(c&&Object.keys(c).length>0?"&"+Object.keys(c).reduce(function(a,b){return a+"&"+b+"="+c[b]},[]):"")).then(function(a){h=a.data.data.files.reduce(b(function(a){return"http://"+f+"/index.php/s/"+i+"/download?path=/&files="+a}),[]),g.resolve(h)},g.reject)},g.reject),g.promise}var h;return{query:g,get:function(a){var b=d.defer();return g().then(function(c){try{b.resolve(c[a])}catch(a){b.reject(a)}}),b.promise}}}])}resourceFactory("configuration"),resourceFactory("group"),resourceFactory("service"),resourceFactory("member"),resourceFactory("next"),resourceFactory("contact"),resourceFactory("info"),resourceFactory("geo"),owncloudFactory("sermon",function(a){return function(b,c){var d;return c.mimetype.indexOf("audio")>-1&&c.name.split("_").length>1?(d=c.name.split(".")[0].split("_"),b.concat([{filename:c.name,source:{type:c.mimetype.toLowerCase(),src:a(c.name)},preacher:d[1]?d[1].replace(/-/g," ").replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):void 0,name:d[2]?d[2].replace(/-/g," "):void 0,series:d[3]?d[3].replace(/-/g," "):void 0,episode:d[4]?parseInt(d[4]):void 0,date:new Date(d[0])}])):b}},{sort:"name",sortdirection:"desc"}),owncloudFactory("downloads",function(a){return function(b,c){return b.concat([{filename:c.name,title:c.name.split(".").slice(0,-1).join("."),ending:c.name.split(".").slice(-1)[0],url:a(c.name)}])}}),angular.module("efg.contactView",["efg.contactApi","efg.trustFilter","efg.responsiveBackgroundDirective","bootstrap.thumbnailsDirective","hc.marked","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/contact/:id",{controller:"ContactCtrl as contact",templateUrl:"efg.contactView.tpl.html"})}]).controller("ContactCtrl",["contactApi","$routeParams","$filter",function(a,b,c){a.get(b.id).then(function(a){this.img=a.poster,this.title=a.name,this.subtitle=a.subtitle,this.description=a.description}.bind(this))}]).directive("contactpreview",["contactApi",function(a){return{templateUrl:"efg.contactPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"},controller:["$scope",function(b){a.query().then(function(a){b.contacts=Object.keys(a).map(function(b){var c=a[b];return{id:c.action,title:c.name,img:c.thumbnail}})})}]}}]),angular.module("efg.downloadsView",["efg.downloadsApi","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/downloads",{controller:"DownloadsCtrl as downloads",templateUrl:"efg.downloadsView.tpl.html"})}]).controller("DownloadsCtrl",["downloadsApi",function(a){a.query().then(function(a){this.items=a}.bind(this)),this.getImageSrc=function(a){return/(png|jpe?g)$/.test(a.ending)?encodeURI(a.url):"//placehold.it/96?text="+a.ending.toUpperCase()}}]),angular.module("efg.eventView",["efg.headerbarService","efg.eventService","ui.calendar","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/event",{controller:"EventCtrl as event",templateUrl:"efg.eventView.tpl.html"}),a.when("/event/print",{controller:"EventPrintCtrl as event",templateUrl:"efg.eventPrintView.tpl.html"})}]).controller("EventCtrl",["uiCalendarConfig","headerbar","event","$filter","$scope","$log","configurationApi",function(a,b,c,d,e,f,g){function h(a){return angular.element("#calendar").fullCalendar(a)}var i;g.get("event").then(function(a){this.eventSource={googleCalendarId:a.calendar.id},this.eventSources=[this.eventSource],this.calendar={googleCalendarApiKey:a.calendar.apikey,header:!1,timeFormat:"H:mm",height:Math.max(Math.max(document.documentElement.clientHeight,window.innerHeight||0)-document.querySelector(".headerbar").scrollHeight-2*parseInt(document.body.style.paddingBottom),0),viewRender:function(){this.updateTitle()}.bind(this),eventRender:function(a,b){c.unwrap(a).then(function(c){b.prop("title",a.title).addClass(c.classname),this.selectedtypes.indexOf(c.classname)>-1&&b.addClass("is-selected")}.bind(this))}.bind(this)}}.bind(this)),this.today=function(){h("today"),this.updateTitle()}.bind(this),this.next=function(){h("next"),this.updateTitle()}.bind(this),this.previous=function(){h("prev"),this.updateTitle()}.bind(this),this.updateTitle=function(){b.update({id:i[0],content:d("date")(h("getDate")._d,"MMMM"),type:"text"})},c.types().then(function(a){this.eventfilters=a.map(function(a){return angular.extend(a,{checked:!0})}),this.getSelectedTypes=function(){return(this.eventfilters||[]).reduce(function(a,b){return b.checked?a.concat([b.classname]):a},[])},this.selectedtypes=this.getSelectedTypes(),this.updateCalendar=function(){this.selectedtypes=this.getSelectedTypes(),h("rerenderEvents")}}.bind(this)),i=b.add({type:"text",content:d("date")(new Date,"MMMM")},{action:this.previous,type:"button",img:"glyphicon glyphicon-menu-left"},{action:this.today,type:"button",content:"heute"},{action:this.next,type:"button",img:"glyphicon glyphicon-menu-right"}),e.$on("$destroy",function(){b.clear()})}]).controller("EventPrintCtrl",["uiCalendarConfig","$scope","configurationApi",function(a,b,c){var d=a.calendars.events.fullCalendar,e=d.View;d.views.list=e.extend({initialize:function(){e.prototype.initialize.call(arguments)},render:function(){e.prototype.render.call(arguments)},setHeight:function(a,b){e.prototype.setHeight.call(arguments)},renderEvents:function(a){e.prototype.renderEvents.call(arguments)},destroyEvents:function(){e.prototype.destroyEvents.call(arguments)},renderSelection:function(a){e.prototype.renderSelection.call(arguments)},destroySelection:function(){e.prototype.destroySelection(arguments)}}),document.body.classList.remove("view-event"),document.body.classList.add("view-event-print"),c.get("event").then(function(a){this.eventSource={googleCalendarId:a.calendar.id},this.eventSources=[this.eventSource],this.uiConfig={calendar:{googleCalendarApiKey:a.calendar.apikey,defaultView:"list"}}}.bind(this))}]).directive("eventpreview",function(){return{templateUrl:"efg.eventPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"}}}),angular.module("efg.geoView",["efg.componentDirective","efg.geoApi","geolocation","hc.marked","ng","ngMap","ngRoute"]).config(["$routeProvider",function(a){a.when("/geo",{controller:"GeoCtrl as geo",templateUrl:"efg.geoView.tpl.html"}).when("/findus",{redirectTo:"/geo"})}]).controller("GeoCtrl",["geolocation","geoApi","NgMap",function(a,b,c){b.query().then(function(b){this.we=b[Object.keys(b)[0]],this.markers=[{position:new google.maps.LatLng(this.we.latitude,this.we.longitude),title:"Wir",address:[this.we.street,this.we.city].join(", ")}],a.getLocation().then(function(a){this.markers.push({position:new google.maps.LatLng(a.coords.latitude,a.coords.longitude),title:"Du"})}.bind(this))}.bind(this))}]).directive("geopreview",["geoApi","$log","$filter",function(a,b,c){return{templateUrl:"efg.geoPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"},controller:["$scope",function(b){b.responsive=c("responsive"),a.query().then(function(a){b.campuses=Object.keys(a).map(function(b){var c=a[b];return{id:b,subtitle:c.subtitle,location:[c.street,c.city].join(", ")}})})}]}}]),angular.module("efg.groupView",["efg.groupApi","efg.componentDirective","efg.responsiveBackgroundDirective","hc.marked","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/group/:id",{controller:"GroupCtrl as group",templateUrl:"efg.groupView.tpl.html"})}]).controller("GroupCtrl",["groupApi","$routeParams","$filter",function(a,b,c){this.$filter=c,a.get(b.id).then(function(a){this.title=a.name,this.subtitle=[a.date,a.location&&"in der "+a.location,a.target&&"für "+a.target].filter(Boolean).join(", "),this.img=a.poster,this.description=a.description}.bind(this))}]).directive("grouppreview",["groupApi",function(a){return{templateUrl:"efg.groupPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"},controller:["$scope",function(b){a.query().then(function(a){b.groups=Object.keys(a).map(function(b){return{id:b,title:a[b].name,subtitle:a[b].target,img:"glyphicon "+a[b].icon}})})}]}}]),angular.module("efg.imprintView",["efg.componentDirective","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/imprint",{templateUrl:"efg.imprintView.tpl.html"})}]),angular.module("efg.indexView",["efg.serviceView","efg.geoView","efg.eventView","efg.groupView","efg.nextView","efg.memberView","efg.sermonView","efg.contactView","efg.componentDirective","efg.responsiveBackgroundDirective","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"efg.indexView.tpl.html"})}]),angular.module("efg.infoView",["efg.infoApi","efg.responsiveBackgroundDirective","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/info/:id",{controller:"InfoCtrl as info",templateUrl:"efg.infoView.tpl.html"})}]).controller("InfoCtrl",["infoApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.title=a.name}.bind(this))}]),angular.module("efg",["efg.sermonView","efg.eventView","efg.imprintView","efg.indexView","efg.infoView","efg.serviceView","efg.memberView","efg.geoView","efg.groupView","efg.nextView","efg.contactView","efg.downloadsView","efg.headerbarDirective","ng","ngRoute","angulartics","angulartics.piwik"]).config(["$routeProvider","$locationProvider",function(a,b){a.otherwise({redirectTo:"/"}),b.html5Mode(!1),b.hashPrefix("!")}]).run(["$rootScope","$log","$route",function(a,b,c){a.$on("$routeChangeSuccess",function(){c.current.$$route&&(document.body.className="view-"+(c.current.$$route.originalPath.split("/")[1]||"index"))})}]),angular.module("efg.memberView",["efg.memberApi","efg.responsiveBackgroundDirective","bootstrap.thumbnailsDirective","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/member/:id",{controller:"MemberCtrl as member",templateUrl:"efg.memberView.tpl.html"})}]).controller("MemberCtrl",["memberApi","$routeParams","$filter",function(a,b,c){this.$filter=c,a.get(b.id).then(function(a){this.title=[a.name.givenname,a.name.familyname].join(" "),this.subtitle=a.duties.join(", "),this.description=a.description,this.img=a.poster}.bind(this))}]).directive("memberpreview",["memberApi","$log",function(a,b){return{templateUrl:"efg.memberPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"},controller:["$scope",function(b){function c(a){return{id:a.id,title:[a.name.givenname,a.name.familyname].join(" "),subtitle:a.duties.join(", "),img:a.img}}a.query().then(function(a){var d,e;for(d in a)e=angular.extend(a[d],{id:d}),b[e.isleader?"leaders":"members"].push(c(e))}),b.members=[],b.leaders=[]}]}}]),angular.module("efg.nextView",["efg.nextApi","efg.responsiveBackgroundDirective","hc.marked","ngRoute"]).config(["$routeProvider",function(a){a.when("/next/:id",{controller:"NextCtrl as next",templateUrl:"efg.nextView.tpl.html"})}]).controller("NextCtrl",["nextApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.title=a.name,this.subtitle=a.subtitle,this.img=a.poster,this.content=a.description}.bind(this))}]).directive("nextpreview",["nextApi","$filter",function(a,b){return{templateUrl:"efg.nextPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"},controller:["$scope",function(c){c.responsive=b("responsive"),a.query().then(function(a){c.actions=Object.keys(a).map(function(b){var c=a[b].action.split(" ");return{id:b,title:c[c.length-1],subtitle:c.slice(0,-1).join(" ")}})})}]}}]),angular.module("efg.sermonView",["efg.sermonsDirective","efg.sermonService","efg.playerService","efg.responsiveBackgroundDirective","hc.marked","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/sermon",{controller:"SermonCtrl as sermon",templateUrl:"efg.sermonView.tpl.html"})}]).controller("SermonCtrl",["player","sermon","$scope","$log",function(a,b,c,d){var e,f;e=function(){this.header="Unsere Predigten",this.subheader="Mitschnitte aus den letzten Gottesdiensten"}.bind(this),e(),c.$watch(b.get,function(a){a?(this.header=a.name,this.subheader=a.preacher+" – "+$filter("date")(a.date,"dd.MM.yyyy"),this.src=a.source.src):e()}.bind(this)),this.ispaused=!0,c.$watch(a.ispaused,function(a){this.ispaused=a}.bind(this)),this.playpause=function(){a.toggle()},f=function(b){a.position(a.position().currenttime+b),a.ispaused()&&a.play()}.bind(this),this.frameduration=10,this.again=function(){f(-this.frameduration)}.bind(this),this.skip=function(){f(this.frameduration)},c.$on("player:timeupdate",function(a,b){this.currenttime=b.currenttime,this.duration=b.duration}.bind(this))}]).directive("sermonpreview",["sermonApi",function(a){return{templateUrl:"efg.sermonPreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"}}}]),angular.module("efg.serviceView",["efg.serviceApi","efg.trustFilter","efg.sermonDirective","efg.responsiveBackgroundDirective","hc.marked","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/service/:id",{controller:"ServiceCtrl as service",templateUrl:"efg.serviceView.tpl.html"})}]).controller("ServiceCtrl",["serviceApi","$routeParams","$filter",function(a,b,c){this.$filter=c,a.get(b.id).then(function(a){this.img=a.poster,this.title=a.name,this.subtitle=a.subtitle,this.description=a.description,this.sermon=a.sermon}.bind(this))}]).directive("servicepreview",["serviceApi",function(a){return{templateUrl:"efg.servicePreview.tpl.html",scope:{classes:"@",background:"@",dark:"@"},controller:["$scope",function(b){b.isLastAndOdd=function(a){return b.services&&b.services.length-1===a&&a%2==0}.bind(this),a.query().then(function(a){b.services=Object.keys(a).map(function(b){var c=a[b];return{id:b,title:c.name,subtitle:[c.schedule.day,c.schedule.hours].join(", ")}})})}]}}]),angular.module("bootstrap.thumbnailDirective",["ng"]).directive("thumbnail",function(){return{link:function(a,b,c){a.contains=function(a,b){return a.indexOf(b)>-1}},replace:!0,restrict:"E",scope:{xhref:"&",header:"=",subheader:"=",img:"=",imgclass:"="},templateUrl:"bootstrap.thumbnailDirective.tpl.html"}}),angular.module("bootstrap.thumbnailsDirective",["bootstrap.thumbnailDirective","ng"]).directive("thumbnails",["$log",function(a){return{controller:["$scope",function(a){function b(a,b){var c,d=[];if(a.length!==b.length)throw new Error("arrays must be of same length!");for(c=0;c<a.length;c++)d.push([a[c],b[c]]);return d}function c(a,b){for(var c=[],d=0;d<b;d++)c.push(a);return c}function d(a,b,e){for(var f=1;f<=b;f++)if(a===f)return c("col-"+e+"-"+12/f,a);return d(b,b,e).concat(d(a-b,b,e))}var e,f=function(a){return b(d(a,3,"sm"),d(a,4,"md")).map(function(a){return a.join(" ")})}(a.items.length);for(e=0;e<a.items.length;e++)a.items[e]=angular.extend(a.items[e],{cls:f[e]})}],restrict:"E",scope:{items:"=",itemstyle:"@",base:"@",imgclass:"@"},templateUrl:"bootstrap.thumbnailsDirective.tpl.html"}}]),angular.module("efg.componentDirective",["ng"]).directive("component",["$log",function(a){return{replace:!0,restrict:"E",scope:{header:"@",subheader:"@",classes:"@"},templateUrl:"efg.componentDirective.tpl.html",controller:["$scope",function(a){a.issinglecolumn=a.classes&&a.classes.indexOf("component-singlecolumn")>-1}],transclude:!0}}]),angular.module("efg.eventService",["ng"]).factory("event",["$q","$log","configurationApi",function(a,b,c){function d(a,b){return a&&a.toLowerCase().lastIndexOf(b.toLowerCase())===a.length-b.length}function e(a,b){var c=b[0];for(var e in a)if(d(c.description,e))return{description:c.description.slice(0,-e.length),classname:a[e]};return{description:c.description,classname:a[Object.keys(a)[0]]}}function f(a){return Object.keys(a).reduce(function(b,c){return b.concat([{title:c,classname:a[c]}])},[])}function g(b){var d=a.defer();return h?d.resolve(b(h,[].slice.call(arguments,1))):c.get("event").then(function(a){h=a.types,d.resolve(b(h,[].slice.call(arguments,1)))},d.reject),d.promise}var h;return{unwrap:function(a){return g(e,a)},types:function(){return g(f)}}}]),angular.module("efg.headerbarDirective",["efg.playerService","efg.headerbarService","efg.sermonService","ng"]).directive("headerbar",["headerbar","player","sermon","$window","$log",function(a,b,c,d,e){return{templateUrl:"efg.headerbarDirective.tpl.html",link:function(d){var e=!0;d.$watch(a.query,function(a){a&&(d.leftitems=a)}),d.$watch(b.ispaused,function(a){d.playpause={id:"playpause",img:"glyphicon glyphicon-"+(a?"play":"pause"),action:b.toggle,type:"button"}}),d.$watch(c.get,function(a){a&&(d.sermon=a,b.reload(),e||b.play(),e=!1)})},transclude:!0,replace:!0}}]).directive("headeraction",function(){return{templateUrl:"efg.headeractionDirective.tpl.html",scope:{item:"="},transclude:!0,replace:!0}}),angular.module("efg.headerbarService",["ng"]).factory("headerbar",function(){var a="",b=[];return{title:function(b){return b?(a=b,this):a},clear:function(){return b=[],this},add:function(){for(var a=[],c=0;c<arguments.length;c++){var d=(1+Math.random()).toString(36).slice(2,8),e=arguments[c];b.indexOf(e)===-1&&(e.id=e.id||d,b.push(e),a.push(d))}return a},remove:function(){var a,c;for(a=0;a<arguments.length;a++)(c=b.indexOf(arguments[a]))>-1&&b.splice(c,1);return this},update:function(){var a,c;for(a=0;a<arguments.length;a++)(c=b.map(function(a){return a.id}).indexOf(arguments[a].id))>-1&&(b[c]=arguments[a]);return this},query:function(){return b},get:function(a,c){return c||(c="id"),b.reduce(function(b,d){return void 0!==b?b:d[c]&&d[c]===a?d:void 0},void 0)}}}),angular.module("efg.playerService",["efg.sermonService","ng"]).factory("player",["sermon","$rootScope","$log",function(a,b,c){function d(a){return{currenttime:a.currentTime,duration:a.duration}}var e=document.createElement("audio");return document.body.appendChild(e),e.addEventListener("timeupdate",function(a){b.$apply(function(){b.$broadcast("player:timeupdate",d(a.target))})}),{toggle:function(){e.paused?e.play():e.pause()},play:function(){e.play()},ispaused:function(){return e.paused},position:function(a){return a&&(e.currentTime=Math.min(Math.max(a,0),e.duration)),d(e)},reload:function(){e.src=a.get().source.src}}}]),angular.module("efg.regexFilter",["ng"]).filter("regex",["$log",function(a){return function(a,b,c){var d=new RegExp(b,"g");return a.filter(function(a){if((c?a[c]:a).match(d))return a})}}]),angular.module("efg.responsiveBackgroundDirective",["efg.responsiveService","efg.responsiveFilter","ng"]).directive("responsiveBackground",["responsive","$filter","$log",function(a,b,c){var d={};return{restrict:"A",link:function(c,e,f){function g(a){return{backgroundImage:[i&&"linear-gradient(90deg, rgba(0,0,0,.7), rgba(0,0,0,.7))","url("+a+")"].filter(Boolean).join(","),backgroundSize:"cover",backgroundPosition:"center"}}var h,i="true"===f.responsiveBackgroundDark,j=f.responsiveBackground,k=b("responsive")(j);j&&(k in d?e.css(g(k)):a.isimage(j)&&a.isasset(j)?(e.css(g(a.assetprefix+"xs/"+j.slice(a.assetprefix.length))),h=document.createElement("img"),h.style.position="absolute",h.style.top="-100000px",h.src=k,h.addEventListener("load",function(){e.css(g(k)),d[k]=!0,document.body.removeChild(h)}),document.body.appendChild(h)):(d[k]=!0,e.css(g(j))))}}}]),angular.module("efg.responsiveFilter",["efg.responsiveService","ng"]).filter("responsive",["responsive","$window",function(a,b){function c(a){return[d(),e()].filter(Boolean).join(a||"")}function d(){return Object.keys(g).reduce(function(a,c){return b.matchMedia("(min-width: "+g[c]+"px)").matches?c:a},"xs")}function e(){return b.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?"2x":void 0}function f(b){return a.assetprefix+c("/")+"/"+b.slice(a.assetprefix.length)}var g={sm:768,md:992,lg:1200};return function(b){return a.isimage(b)&&a.isasset(b)?f(b):b}}]),angular.module("efg.responsiveService",["ng"]).factory("responsive",function(){return{assetprefix:"/assets/img/",isimage:function(a){return/\.(jpg|jpeg|png|gif)$/.test(a)},isasset:function(a){return 0===a.indexOf("/assets/img/")}}}),angular.module("efg.sermonDirective",["efg.trustFilter","ng"]).directive("sermon",function(){return{replace:!0,restrict:"E",scope:{sermon:"=content"},templateUrl:"efg.sermonDirective.tpl.html"}}),angular.module("efg.sermonsDirective",["efg.headerbarService","efg.sermonDirective","efg.sermonService","efg.sermonApi","ng"]).directive("sermons",["sermonApi","sermon","headerbar",function(a,b,c){return{templateUrl:"efg.sermonsDirective.tpl.html",link:function(d,e,f){d.sermons=[],d.search="",a.query().then(function(a){d.sermons=a}),d.activate=function(a){b.set(a)},d.isactive=function(a){return b.is(a)},d.upateSearch=function(a){d.search=a},d.searchFilter=function(a){return""===d.search||(!!(a.series&&a.series.toLowerCase().indexOf(d.search.toLowerCase())>-1)||(!!(a.name&&a.name.toLowerCase().indexOf(d.search.toLowerCase())>-1)||!!(a.preacher&&a.preacher.toLowerCase().indexOf(d.search.toLowerCase())>-1)))},c.add({id:"search",action:d.upateSearch,type:"search",content:"Predigten durchsuchen"}),d.$on("$destroy",function(){c.clear()})}}}]),angular.module("efg.sermonService",["efg.sermonApi","ng"]).factory("sermon",["sermonApi",function(a){var b;return a.get(0).then(function(a){b||(b=a)}),{is:function(a){return b===a},set:function(a){b=a},get:function(){return b}}}]),angular.module("efg.trustFilter",["ng"]).filter("trustHtml",["$sce",function(a){return a.trustAsHtml}]).filter("trustResource",["$sce",function(a){return a.trustAsResourceUrl}]),angular.module("efg").run(["$templateCache",function(a){a.put("efg.contactPreview.tpl.html",'<component classes="component-lg {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Kontakt" subheader="So erreichst Du uns." ng-if="contacts"><thumbnails items="contacts" href=""></thumbnails></component>'),a.put("efg.contactView.tpl.html",'<component ng-if="contact.title" classes="component-flex component-sm bg-dark" header="{{contact.title}}" subheader="{{contact.subtitle}}" responsive-background="{{contact.img}}"></component><component classes="component-sm component-singlecolumn"><div marked="contact.description"></div></component>'),a.put("efg.downloadsView.tpl.html",'<component classes="component-lg bg-dark bg-img" header="Downloads" responsive-background="https://unsplash.com/photos/a2NRu2Wxa2o/download" responsive-background-dark></component><component classes="component-singlecolumn"><a class="efgMediaobject" ng-repeat="item in downloads.items" ng-href="{{item.url}}" download><div class="efgMediaobject__thumbnail" ng-style="{\'background-image\': \'url(\' + downloads.getImageSrc(item) + \')\'}"></div><div class="efgMediaobject__body"><h4 class="efgMediaobject__title">{{item.title}}<small>.{{item.ending}}</small></h4></div></a></component>'),a.put("efg.eventPreview.tpl.html",'<component classes="events {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Nächste Events" subheader="Bei uns in der Gemeinde."><a class="btn btn-lg btn-outline" ng-href="#!/event/">zum Kalender</a></component>'),a.put("efg.eventPrintView.tpl.html",'<div ng-if="event.eventSources" ui-calendar="event.uiConfig.calendar" ng-model="event.eventSources" calendar="events"></div>'),a.put("efg.eventView.tpl.html",'<component classes="component-almost-viewport"><div class="col-xs-12 col-sm-9 col-md-10" ng-if="event.calendar"><div id="calendar" ng-if="event.eventSources" ui-calendar="event.calendar" ng-model="event.eventSources"></div></div><div class="col-xs-12 col-sm-3 col-md-2"><h3 class="text-left">Finde Termine</h3><ul class="eventfilters"><li class="eventfilter" ng-class="\n                    (filter.classname ? filter.classname : \'\') +\n                    (filter.checked ? \' is-selected\' : \'\')" ng-repeat="filter in event.eventfilters"><label><input type="checkbox" ng-model="filter.checked" ng-change="event.updateCalendar()"> {{filter.title}}</label></li></ul></div></component>'),a.put("efg.geoPreview.tpl.html",'<component classes="{{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Unser Standort" subheader="{{campuses[0].subtitle}}" ng-if="campuses && campuses.length > 0"><div class="col-md-12"><p class="lead">{{campuses[0].location}}</p><p class="u-space-top"><a href="#!/geo" class="btn btn-lg btn-light btn-outline">Wegbeschreibung anzeigen</a></p></div></component>'),a.put("efg.geoView.tpl.html",'<div class="component component-almost-viewport"><ng-map zoom="11" zoom-to-include-markers="auto" center="{{geo.markers[0].lat()}}, {{geo.markers[0].lng()}}" style="height:100%"><custom-marker ng-repeat="marker in geo.markers" position="{{marker.position.lat()}}, {{marker.position.lng()}}"><div class="efg-map-marker"><p>{{marker.title}}</p><address ng-if="marker.address">{{marker.address}}</address></div></custom-marker></ng-map></div><component classes="component-lg" header="{{geo.we.street}}, {{geo.we.city}}" subheader="Plane Deinen Weg zu uns."><div class="col-sm-6" ng-repeat="connection in geo.we.connections"><h3>{{connection.title}}</h3><p class="u-space-horizontal"><a ng-href="{{connection.url}}" class="btn btn-lg btn-outline" target="_blank">{{connection.action}}</a></p><div marked="connection.description"></div></div></component>'),a.put("efg.groupPreview.tpl.html",'<component classes="groups {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Unsere Gruppen" subheader="Finde Leute wie Dich."><thumbnails ng-if="groups" items="groups" base="#!/group/"></component>'),a.put("efg.groupView.tpl.html",'<component ng-if="group.title" classes="component-almost-viewport component-flex bg-img bg-dark" responsive-background="{{group.img}}" responsive-background-dark="true" ng-if="group.img" header="{{group.title}}" subheader="{{group.subtitle}}"></component><component classes="component-lg component-singlecolumn"><div marked="group.description"></div></component>'),a.put("efg.imprintView.tpl.html",'<component classes="component-lg component-singlecolumn" header="Impressum"><h3>Kontakt</h3><p></p><address><strong>Evangelisch-Freikirchliche Gemeinde Ludwigshafen (Baptisten)</strong><br>im Bund Evangelisch-Freikirchlicher Gemeinden in Deutschland K.d.Ö.R<br><br>Böhlstraße 5<br>67063 Ludwigshafen</address><p></p><p></p><address>V.i.S.d.P.: <strong>Wilfried Schmitt</strong><br>E-Mail: <a href="mailto:info@efg-ludwigshafen.de">info@efg-ludwigshafen.de</a></address><p></p><h3>Haftungsausschluss</h3><p>Trotz sorgfältiger inhaltlicher Kontrolle übernehmen wir keine Haftung für die Inhalte externer Links. Für den Inhalt der verlinkten Seiten sind ausschließlich deren Betreiber verantwortlich.</p></component>'),a.put("efg.indexView.tpl.html",'<component classes="welcome component-flex component-almost-viewport bg-img bg-dark" responsive-background="/assets/img/header.jpg" responsive-background-dark="true"><div class="col-md-12"><svg version="1.1" style="width:600px; max-width:80vw" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2260 700"><text text-anchor="end" x="1951" y="485" class="c-light">Evangelisch-Freikirchliche Gemeinde (Baptisten)</text><text text-anchor="end" x="1951" y="603" class="c-light" style="font-weight:600">Ludwigshafen</text><path d="M 2044   0 h  42 v 180 h  90 v   42 h -132 Z" class="c-primary"/><path d="M 2044 232 v 132 h  42 v -90 h  180 v  -42 Z" class="c-light"/><path d="M 1902 232 h 132 v 373 h -42 v -331 h  -90 Z" class="c-light"/><path d="M 1812 180 h 180 v -90 h  42 v  132 h -222 Z" class="c-light"/></svg></div></component><servicepreview classes="component-lg"></servicepreview><geopreview classes="component-lg bg-img bg-dark" background="/assets/img/geopreview.jpg" dark="true"></geopreview><eventpreview classes="component-lg"></eventpreview><nextpreview classes="component-lg bg-dark bg-img" background="/assets/img/nextpreview.jpg" dark="true"></nextpreview><memberpreview classes="component-lg bg-primary"></memberpreview><grouppreview classes="component-lg bg-img bg-dark" background="//unsplash.com/photos/_pc8aMbI9UQ/download" dark="true"></grouppreview><sermonpreview classes="component-lg"></sermonpreview><contactpreview classes="component-lg bg-dark"></contactpreview><component><div class="col-sm-4"><a href="#!/imprint" style="color:inherit">Impressum</a></div><div class="col-sm-4"><a href="#!/downloads" style="color:inherit">Downloads</a></div><div class="col-sm-4"><a href="https://github.com/efg-ludwigshafen/efg-ludwigshafen.github.io" style="color:inherit"><i class="glyphicon glyphicon-heart"></i> Source Code auf GitHub</a></div></component>'),a.put("efg.infoView.tpl.html",'<component ng-if="group.img" classes="component-almost-viewport" responsive-background="{{group.img}}"></component><component classes="component-lg" header="{{info.title}}"></component>'),a.put("efg.memberPreview.tpl.html",'<component classes="members {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Unsere Gemeindeleitung"><div class="col-md-12"><div class="row"><thumbnails ng-if="leaders.length > 0" items="leaders" base="#!/member/" imgclass="img-circle img-thumbnail"></div><div class="row" ng-hide="showFullTeam" ng-init="showFullTeam = false"><div class="col-md-12"><button type="button" class="btn btn-lg btn-outline" ng-click="showFullTeam = true">mehr Verantwortliche</button></div></div><div class="row" ng-if="showFullTeam"><thumbnails ng-if="members.length > 0" items="members" base="#!/member/" imgclass="img-circle img-thumbnail"></div></div></component>'),a.put("efg.memberView.tpl.html",'<component ng-if="member.title" classes="component-almost-viewport component-flex bg-img bg-dark" responsive-background="{{member.img}}" responsive-background-dark="true" header="{{member.title}}" subheader="{{member.subtitle}}"></component><component classes="component-lg component-singlecolumn"><div marked="member.description"></div></component>'),a.put("efg.nextPreview.tpl.html",'<component classes="next {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Nächste Schritte"><div class="col-sm-4" ng-repeat="action in actions" style="margin-bottom: 2rem; padding-left: 2rem; padding-right: 2rem"><a class="btn btn-lg btn-block btn-outline" ng-href="#!/next/{{action.id}}">{{action.subtitle}}<br><b>{{action.title}}</b></a></div></component>'),a.put("efg.nextView.tpl.html",'<component ng-if="next.title" classes="component-almost-viewport component-flex bg-dark bg-img" header="{{next.title}}" subheader="{{next.subtitle}}" responsive-background="{{next.img}}" responsive-background-dark="true"></component><component classes="component-lg component-singlecolumn"><div marked="next.content"></div></component>'),a.put("efg.sermonPreview.tpl.html",'<component classes="sermons {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="Predigten" subheader="Hör Dir unsere Aufnahmen an."><div class="col-md-12"><p class="u-space-top"><a class="btn btn-lg btn-outline" ng-href="#!/sermon/">Predigt auswählen</a></p></div></component>'),
a.put("efg.sermonView.tpl.html",'<component classes="component-sm bg-img bg-dark text-center component-sermon" responsive-background="//unsplash.com/photos/G6G93jtU1vE/download" responsive-background-dark="true" header="{{sermon.header}}" subheader="{{sermon.subheader}}"><button ng-click="sermon.again()" class="btn btn-outline btn-light" title="{{sermon.frameduration}} Sekunden zurückspulen"><i class="glyphicon glyphicon-repeat glyphicon-flip-horizontal"></i></button> <button analytics-on analytics-category="Media" analytics-event="Play" analytics-label="{{sermon.subheader}}" ng-click="sermon.playpause()" class="btn btn-outline btn-light"><i class="glyphicon" ng-class="{\'glyphicon-play\': sermon.ispaused, \'glyphicon-pause\': !sermon.ispaused}"></i></button> <a analytics-on analytics-category="Media" analytics-event="Download" analytics-label="{{sermon.subheader}}" ng-href="{{sermon.src}}" class="btn btn-outline btn-light" download><i class="glyphicon glyphicon-save"></i> </a><button ng-click="sermon.skip()" class="btn btn-outline btn-light" title="{{sermon.frameduration}} Sekunden vorspulen"><i class="glyphicon glyphicon-repeat"></i></button><progress class="sermon-progress" value="{{sermon.currenttime || 0}}" max="{{sermon.duration || 1}}"></progress></component><component classes="component-sm component-singlecolumn"><sermons></sermons></component>'),a.put("efg.servicePreview.tpl.html",'<component classes="services {{classes}}" responsive-background="{{background}}" responsive-background-dark="{{dark}}" header="{{ services.length === 1 ? \'Unser Gottesdienst\' : \'Unsere Gottesdienste\' }}" subheader="Wir freuen uns sehr, Dich dort zu begrüßen."><div ng-if="services" class="col-sm-6" style="padding-left: 2rem; padding-right: 2rem" ng-repeat="service in services" ng-class="{\'col-sm-offset-3\': isLastAndOdd($index)}"><a ng-href="#!/service/{{service.id}}" class="btn btn-lg btn-block btn-outline"><span ng-bind="service.title"></span><br><strong ng-bind="service.subtitle"></strong></a></div></component>'),a.put("efg.serviceView.tpl.html",'<component ng-if="service.title" classes="component-flex bg-dark{{service.img ? \' bg-img component-almost-viewport\' : \' component-sm\'}}" responsive-background="{{service.img}}" responsive-background-dark="true" header="{{service.title}}" subheader="{{service.subtitle}}"></component><component classes="component-sm component-singlecolumn"><div marked="service.description"></div></component>'),a.put("bootstrap.thumbnailDirective.tpl.html",'<a ng-href="{{xhref()}}" class="thumbnail" ng-class="classes"><p ng-if="img && contains(img, \' \')"><i ng-class="img"></i></p><img ng-if="img && !contains(img, \' \')" ng-src="{{img}}" ng-class="imgclass"><div class="caption"><h3 ng-bind="header"></h3><p ng-bind="subheader"></p></div></a>'),a.put("bootstrap.thumbnailsDirective.tpl.html",'<thumbnail ng-repeat="item in items" xhref="base + item.id" class="{{item.cls}}" ng-style="{{itemstyle}}" header="item.title" subheader="item.subtitle" img="item.img" imgclass="imgclass"></thumbnail>'),a.put("efg.componentDirective.tpl.html",'<article class="component" ng-class="classes"><div class="container text-center"><header class="row" ng-if="header || subheader"><div class="col-md-12"><h2 ng-bind="header"></h2><p ng-bind="subheader" class="text-eased"></p></div></header><div ng-if="issinglecolumn" class="row"><div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 text-left" ng-transclude></div></div><div ng-if="!issinglecolumn" class="row" ng-transclude></div></div></article>'),a.put("efg.headeractionDirective.tpl.html",'<li class="headerbar-item"><button ng-if="item.type === \'button\'" ng-href="{{item.href}}" ng-click="item.action()" class="btn btn-outline headerbar-btn"><i ng-if="item.img && item.img.indexOf(\' \') > -1" ng-class="item.img"></i> <img ng-if="item.img && item.img.indexOf(\' \') === -1" ng-src="item.img | responsive" class="img-responsive"> <span ng-transclude></span></button><div ng-if="item.type === \'text\'">{{item.content}}</div><div class="input-group input-group-outline" ng-if="item.type === \'search\'"><div class="input-group-addon"><i class="glyphicon glyphicon-search"></i></div><input placeholder="{{item.content}}" type="search" class="form-control" ng-change="item.action(searchString)" ng-model="searchString"></div></li>'),a.put("efg.headerbarDirective.tpl.html",'<nav class="headerbar headerbar-fixed-top"><ul class="headerbar-items"><li class="headerbar-item headerbar-brand"><a href="#!/"><img alt="EFG Ludwigshafen" src="assets/img/logo.svg" class="img-responsive"></a></li><headeraction ng-repeat="item in leftitems" item="item">{{item.content}}</headeraction></ul><ul class="headerbar-rightitems" ng-if="sermon"><li class="headerbar-item"><a href="#!/sermon">{{sermon.name}}<br><small>{{sermon.preacher}} &ndash; {{sermon.date | date:\'dd.MM.yyyy\'}}</small></a></li><li class="headerbar-item"><button analytics-on analytics-category="Media" analytics-event="Play" analytics-label="{{sermon.preacher}} &ndash; {{sermon.date | date:\'dd.MM.yyyy\'}}" ng-click="playpause.action()" class="btn btn-outline headerbar-btn"><i ng-class="playpause.img"></i></button></li></ul></nav>'),a.put("efg.sermonDirective.tpl.html",'<audio controls class="show" type="{{sermon.source.type}}" ng-src="{{sermon.source.src | trustResource}}" preload="auto"></audio>'),a.put("efg.sermonsDirective.tpl.html",'<ul class="sermons"><li ng-repeat="s in sermons | filter:searchFilter" ng-click="activate(s)" ng-class="{active: isactive(s)}" class="sermon text-left"><p ng-show="s.series"><small>{{s.series}} <span ng-if="s.episode">{{s.episode}}</span></small></p><h4>{{s.name}}</h4><p><span style="margin-right:1rem">{{s.date | date:\'dd.MM.yy\'}}</span>{{s.preacher}}</p></li></ul>')}]);
//# sourceMappingURL=main.min.js.map
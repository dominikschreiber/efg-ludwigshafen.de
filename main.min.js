"use strict";function resourceFactory(a){var b=a+"Api";angular.module("efg."+b,["ng"]).factory(b,["$q","$http",function(b,c){function d(){var d=b.defer();return e?d.resolve(e):c.get("data/"+a+".yml").success(function(a){e=jsyaml.load(a),d.resolve(e)}),d.promise}var e;return{query:d,get:function(a){var c=b.defer();return d().then(function(b){try{c.resolve(b[a])}catch(d){c.reject(d)}}),c.promise}}}])}resourceFactory("group"),resourceFactory("service"),resourceFactory("member"),resourceFactory("next"),resourceFactory("contact"),resourceFactory("info"),resourceFactory("event"),resourceFactory("sermon"),angular.module("efg.eventView",["efg.eventApi","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/event/:id",{controller:"EventCtrl as event",templateUrl:"efg.eventView.tpl.html"})}]).controller("EventCtrl",["eventApi","$routeParams",function(a,b){a.get(b.id).then(function(a){}.bind(this))}]),angular.module("efg.findusView",["efg.componentDirective","uiGmapgoogle-maps","geolocation","ng","ngRoute"]).config(["$routeProvider","uiGmapGoogleMapApiProvider",function(a,b){a.when("/findus",{controller:"FindusCtrl as findus",templateUrl:"efg.findusView.tpl.html"}),b.configure({v:"3.17",libraries:"weather,geometry,visualization"})}]).controller("FindusCtrl",["geolocation",function(a){var b=49.49172,c=8.435441,d=1e-4;this.map={center:{latitude:b,longitude:c},zoom:15,options:{backgroundColor:"rgb(233,229,220)",scrollwheel:!1},bounds:{northeast:{latitude:b*(1+d),longitude:c*(1+d)},southwest:{latitude:b*(1-d),longitude:c*(1-d)}}},this.we={coords:{latitude:b,longitude:c},id:0},this.you=void 0,a.getLocation().then(angular.bind(this,function(a){this.you={coords:a.coords,id:1},this.map.bounds={northeast:{latitude:Math.max(this.we.coords.latitude,this.you.coords.latitude)*(1+d),longitude:Math.max(this.we.coords.longitude,this.you.coords.longitude)*(1+d)},southwest:{latitude:Math.min(this.we.coords.latitude,this.you.coords.latitude)*(1-d),longitude:Math.min(this.we.coords.longitude,this.you.coords.longitude)*(1-d)}}}))}]),angular.module("efg.groupView",["efg.groupApi","efg.componentDirective","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/group/:id",{controller:"GroupCtrl as group",templateUrl:"efg.groupView.tpl.html"})}]).controller("GroupCtrl",["groupApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.title=a.name,this.img=a.poster}.bind(this))}]),angular.module("efg.indexView",["efg.contactApi","efg.nextApi","efg.memberApi","efg.serviceApi","efg.groupApi","efg.infoApi","efg.eventApi","efg.sermonApi","efg.componentDirective","efg.sermonDirective","bootstrap.thumbnailDirective","bootstrap.thumbnailsDirective","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{controller:"IndexCtrl as index",templateUrl:"efg.indexView.tpl.html"})}]).controller("IndexCtrl",["eventApi","infoApi","contactApi","nextApi","memberApi","serviceApi","groupApi","sermonApi","$http","$log","$filter",function(a,b,c,d,e,f,g,h,i,j,k){this.$filter=k,f.query().then(function(a){this.services=Object.keys(a).map(function(b){var c=a[b];return{id:b,title:c.name,subtitle:[c.schedule.day,c.schedule.hours].join(", ")}})}.bind(this)),g.query().then(function(a){this.groups=Object.keys(a).map(function(b){var c=a[b];return{id:b,title:c.name,subtitle:c.category,img:c.thumbnail}})}.bind(this)),e.query().then(function(a){function b(a){return{id:a.id,title:[a.name.givenname,a.name.familyname].join(" "),subtitle:a.duties.join(", "),img:a.img}}this.members=Object.keys(a).reduce(function(c,d){var e=a[d];return-1===e.duties.indexOf("Ältester")&&c.push(b(e)),c},[]),this.elders=Object.keys(a).reduce(function(c,d){var e=a[d];return e.duties.indexOf("Ältester")>-1&&c.push(b(e)),c},[])}.bind(this)),a.query().then(function(a){this.events=Object.keys(a).map(function(b){var c=a[b];return{id:b,title:c.name,subtitle:c.date.length>1?c.date.reduce(function(a,b){var c=a[0],d=a[1];return c>b&&(c=b),b>d&&(d=b),[c,d]},[Number.MAX_VALUE,Number.MIN_VALUE]).map(function(a){return k("date")(new Date(a),"d. MMMM")}).join(" bis "):k("date")(new Date(c.date[0]),"d. MMMM HH:mm"),img:c.thumbnail}})}.bind(this)),d.query().then(function(a){this.next=Object.keys(a).map(function(b){var c=a[b].action.split(" ");return{id:b,title:_.last(c),subtitle:_.initial(c).join(" ")}})}.bind(this)),b.query().then(function(a){this.infos=Object.keys(a).map(function(b){var c=a[b];return{id:b,title:c.name,subtitle:c.subtitle,img:c.thumbnail}})}.bind(this)),h.query().then(function(a){this.sermon=a[Object.keys(a)[0]]}.bind(this)),c.query().then(function(a){this.contacts=Object.keys(a).map(function(b){var c=a[b];return{id:c.action,title:c.name,img:c.thumbnail}})}.bind(this))}]),angular.module("efg.infoView",["efg.infoApi","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/info/:id",{controller:"InfoCtrl as info",templateUrl:"efg.infoView.tpl.html"})}]).controller("InfoCtrl",["infoApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.title=a.name}.bind(this))}]),angular.module("efg",["efg.eventView","efg.indexView","efg.infoView","efg.serviceView","efg.memberView","efg.findusView","efg.groupView","efg.nextView","ng","ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.otherwise({redirectTo:"/"}),b.html5Mode(!1),b.hashPrefix("!")}]),angular.module("efg.memberView",["efg.memberApi","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/member/:id",{controller:"MemberCtrl as member",templateUrl:"efg.memberView.tpl.html"})}]).controller("MemberCtrl",["memberApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.title=[a.name.givenname,a.name.familyname].join(" "),this.subtitle=a.duties.join(", "),this.description=a.description,this.img=a.poster}.bind(this))}]),angular.module("efg.nextView",["efg.nextApi","md.parseMarkdownFilter","ngRoute"]).config(["$routeProvider",function(a){a.when("/next/:id",{controller:"NextCtrl as next",templateUrl:"efg.nextView.tpl.html"})}]).controller("NextCtrl",["nextApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.title=a.name,this.subtitle=a.subtitle,this.img=a.poster,this.content=a.description}.bind(this))}]),angular.module("efg.serviceView",["efg.serviceApi","efg.trustFilter","efg.sermonDirective","md.parseMarkdownFilter","ng","ngRoute"]).config(["$routeProvider",function(a){a.when("/service/:id",{controller:"ServiceCtrl as service",templateUrl:"efg.serviceView.tpl.html"})}]).controller("ServiceCtrl",["serviceApi","$routeParams",function(a,b){a.get(b.id).then(function(a){this.img=a.poster,this.title=a.name,this.subtitle=a.subtitle,this.description=a.description,this.sermon=a.sermon}.bind(this))}]),angular.module("bootstrap.thumbnailDirective",["ng"]).directive("thumbnail",function(){return{link:function(a,b,c){a.contains=function(a,b){return a.indexOf(b)>-1}},replace:!0,restrict:"E",scope:{href:"=",header:"=",subheader:"=",img:"=",imgclass:"="},templateUrl:"bootstrap.thumbnailDirective.tpl.html"}}),angular.module("bootstrap.thumbnailsDirective",["bootstrap.thumbnailDirective","ng"]).directive("thumbnails",["$log",function(a){return{link:function(a,b,c){function d(a,b){for(var c=[],d=0;b>d;d++)c.push(a);return c}function e(a,b,c){for(var f=1;b>=f;f++)if(a===f)return d("col-"+c+"-"+12/f,a);return e(b,b,c).concat(e(a-b,b,c))}function f(a){return _.zip(e(a,3,"sm"),e(a,4,"md")).map(function(a){return a.join(" ")})}var g,h=f(a.items.length);for(g=0;g<a.items.length;g++)a.items[g]=angular.extend(a.items[g],{cls:h[g]})},restrict:"E",scope:{items:"=",itemstyle:"@",base:"@",imgclass:"@"},templateUrl:"bootstrap.thumbnailsDirective.tpl.html"}}]),angular.module("efg.componentDirective",["ng"]).directive("component",function(){return{replace:!0,restrict:"E",scope:{header:"@",subheader:"@",classes:"@"},templateUrl:"efg.componentDirective.tpl.html",transclude:!0}}),angular.module("efg.regexFilter",["ng"]).filter("regex",["$log",function(a){return function(a,b,c){var d=new RegExp(b,"g");return a.filter(function(a){var b=c?a[c]:a;return b.match(d)?a:void 0})}}]),angular.module("efg.sermonDirective",["efg.trustFilter","ng"]).directive("sermon",function(){return{replace:!0,restrict:"E",scope:{sermon:"=content"},templateUrl:"efg.sermonDirective.tpl.html"}}),angular.module("efg.trustFilter",["ng"]).filter("trustHtml",["$sce",function(a){return a.trustAsHtml}]).filter("trustResource",["$sce",function(a){return a.trustAsResourceUrl}]),angular.module("md.parseMarkdownFilter",["ng"]).filter("parseMarkdown",["$filter",function(a){function b(a){return a}function c(a){return a}function d(a){var d=_.reduce(g,function(d,f){return b(a)&&b(f)&&0===a.indexOf(f[0])?f[1]+c(a.substring(f[0].length))+e(f[1]):d},void 0);return void 0!==d?d:"<p>"+c(a)+"</p>"}function e(a){return _.chain(a.split(">")).filter(b).map(function(a){return a+">"}).reverse().value().join("").replace(/</g,"</")}function f(a){return _.chain(a.split(/\n/g)).filter(b).map(d).value().join("").replace(/<\/ul><ul>/g,"").replace(/<\/blockquote><blockquote>/g,"")}var g=_.pairs({"# ":"<h1>","## ":"<h2>","### ":"<h3>","> ":"<blockquote>","- ":"<ul><li>","* ":"<ul><li>"});return function(b){return a("trustHtml")(f(b))}}]),angular.module("efg").run(["$templateCache",function(a){a.put("efg.eventView.tpl.html",""),a.put("efg.findusView.tpl.html",'<div class="component component-almost-viewport"><ui-gmap-google-map center="findus.map.center" zoom="findus.map.zoom" options="findus.map.options" bounds="findus.map.bounds"><ui-gmap-marker idkey="findus.we.id" coords="findus.we.coords"><ui-gmap-window show="true"><div><p>Wir</p><address>Böhlstraße 5<br>Ludwigshafen</address></div></ui-gmap-window></ui-gmap-marker><ui-gmap-marker ng-if="findus.you !== undefined" idkey="findus.you.id" coords="findus.you.coords"><ui-gmap-window show="true"><div><p>Du</p></div></ui-gmap-window></ui-gmap-marker></ui-gmap-google-map></div><component classes="component-lg" header="Böhlstraße 5, Ludwigshafen" subheader="Plane Deinen Weg zu uns."><div class="col-sm-6"><h3>Mit öffentlichen Verkehrsmitteln</h3><p class="u-space-horizontal"><a href="http://fahrplanauskunft.vrn.de/vrn/XSLT_TRIP_REQUEST2?language=de&sessionID=0&name_destination=Hemshofstra%C3%9Fe,%20Ludwigshafen&type_destination=stop" class="btn btn-lg btn-outline" target="_blank">Zum VRN</a></p><p>Die Haltestelle <em>Hemshofstraße/BASF Tor 7</em> (Linie 7) ist zwei Gehminuten entfernt.</p></div><div class="col-sm-6"><h3>Mit dem Auto</h3><p class="u-space-horizontal"><a href="https://www.google.de/maps/place/Böhlstraße+5,+67063+Ludwigshafen+am+Rhein/" class="btn btn-lg btn-outline" target="_blank">Zu Google Maps</a></p><p>Du kannst direkt gegenüber parken. Oder auf dem BASF-Mitarbeiterplatz (<em>Anilinstraße</em>) &ndash; zu Fuß zwei Minuten.</p></div></component>'),a.put("efg.groupView.tpl.html",'<component classes="component-almost-viewport" ng-style="{\'background-image\': \'url(\' + group.img + \')\'}"></component><component classes="component-lg" header="{{group.title}}"></component>'),a.put("efg.indexView.tpl.html",'<component classes="component-flex component-almost-viewport bg-img bg-dark" style="background-image: linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)), url(//lorempixel.com/g/1920/1080/abstract)" header="EfG Ludwigshafen" subheader="Baptisten im Hemshof"></component><component classes="component-lg" header="Unsere Gottesdienste" subheader="Wir freuen uns sehr, Dich dort zu begrüßen."><div class="col-sm-6" style="padding-left: 2rem; padding-right: 2rem" ng-repeat="service in index.services"><a ng-href="#!/service/{{service.id}}" class="btn btn-lg btn-block btn-outline"><span ng-bind="service.title"></span><br><strong ng-bind="service.subtitle"></strong></a></div></component><component classes="component-lg bg-img bg-dark" style="background-image: linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)), url(//lorempixel.com/g/1920/1080/transport)" header="Unser Standort" subheader="Wir sind mitten im Hemshof, dem Herz von Ludwigshafen."><div class="col-md-12"><p class="lead">Böhlstraße 5, 67063 Ludwigshafen</p><p class="u-space-top"><a href="#!/findus" class="btn btn-lg btn-light btn-outline">Wegbeschreibung anzeigen</a></p></div></component><component classes="component-lg" header="Nächste Events" subheader="Bei uns in der Gemeinde."><thumbnails ng-if="index.events.length > 0" items="index.events" base="#!/event/" imgclass="img-rounded"></component><component classes="component-lg bg-img bg-dark" style="background-image: linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)), url(//lorempixel.com/g/1920/1080/people)" header="Unsere Gruppen" subheader="Du bist herzlich eingeladen."><thumbnails ng-if="index.groups.length > 0" items="index.groups" base="#!/group/" imgclass="img-circle"></component><component classes="component-lg" header="Informationen" subheader="Wir wollen Deine Fragen beantworten."><thumbnails ng-if="index.infos.length > 0" items="index.infos" base="#!/info/"></component><component classes="component-lg bg-primary" header="Nächste Schritte"><div class="col-sm-4" ng-repeat="action in index.next" style="margin-bottom: 2rem; padding-left: 2rem; padding-right: 2rem"><a class="btn btn-light btn-lg btn-block btn-outline" ng-href="#!/next/{{action.id}}">{{action.subtitle}}<br><b>{{action.title}}</b></a></div></component><component classes="component-lg" header="Unser Team"><div class="col-md-12"><div class="row"><thumbnails ng-if="index.elders.length > 0" itemstyle="{\'padding-left\': \'6rem\', \'padding-right\': \'6rem\'}" items="index.elders" base="#!/member/" imgclass="img-circle img-thumbnail"></div><div class="row" ng-hide="index.showFullTeam" ng-init="index.showFullTeam = false"><div class="col-md-12"><button type="button" class="btn btn-lg btn-outline" ng-click="index.showFullTeam = true">mehr Verantwortliche</button></div></div><div class="row" ng-if="index.showFullTeam"><thumbnails ng-if="index.members.length > 0" items="index.members" base="#!/member/" imgclass="img-circle img-thumbnail"></div></div></component><component classes="component-lg bg-success" header="Predigten"><div class="col-md-12"><h3>{{index.sermon.name}} <small>{{index.sermon.date | date:\'d. MMMM\'}}, von {{index.sermon.preacher.name}}</small></h3><sermon content="index.sermon" style="width: 100%"></sermon><p class="u-space-top"><a class="btn btn-lg btn-outline" ng-href="#!/sermon/">mehr Predigten</a></p></div></component><component classes="component-lg bg-dark" header="Kontakt" subheader="So erreichst Du uns."><thumbnails ng-if="index.contacts.length > 0" items="index.contacts" href=""></component>'),a.put("efg.infoView.tpl.html",'<component classes="component-almost-viewport" ng-style="{\'background-image\': \'url(\' + group.img + \')\'}"></component><component classes="component-lg" header="{{info.title}}"></component>'),a.put("efg.memberView.tpl.html",'<component classes="component-almost-viewport bg-img" ng-style="{\'background-image\': \'url(\' + member.img + \')\'}"></component><component classes="component-lg" header="{{member.title}}" subheader="{{member.subtitle}}">{{member.description}}</component>'),a.put("efg.nextView.tpl.html",'<component classes="component-almost-viewport component-flex bg-dark bg-img" header="{{next.title}}" subheader="{{next.subtitle}}" ng-style="{\'background-image\': \'url(\' + next.img + \')\'}"></component><component classes="component-lg"><div ng-bind-html="next.content | parseMarkdown"></div></component>'),a.put("efg.serviceView.tpl.html",'<component classes="component-flex component-almost-viewport bg-dark" ng-style="{\'background-image\': \'url(\' + service.img + \')\'}" header="{{service.title}}" subheader="{{service.subtitle}}"></component><component classes="component-lg"><div class="col-sm-6 text-left" ng-class="{\'col-sm-offset-3\': !service.sermon}" ng-bind-html="service.description | parseMarkdown"></div><div class="col-sm-6" ng-if="service.sermon"><h3>Hör Dir eine Predigt an</h3><p class="lead">{{service.sermon.name}}</p><p>vom {{service.sermon.date | date:\'d. MMMM\'}}, von {{service.sermon.preacher.name}}</p><sermon content="service.sermon" style="width: 100%"></sermon></div></component>'),a.put("bootstrap.thumbnailDirective.tpl.html",'<a ng-href="{{href}}" class="thumbnail" ng-class="classes"><p ng-if="img && contains(img, \' \')" style="font-size: 3rem"><i ng-class="img"></i></p><img ng-if="img && !contains(img, \' \')" ng-src="{{img}}" ng-class="imgclass"><div class="caption"><h3 ng-bind="header"></h3><p ng-bind="subheader"></p></div></a>'),a.put("bootstrap.thumbnailsDirective.tpl.html",'<thumbnail ng-repeat="item in items" ng-href="{{base}}{{item.id}}" class="{{item.cls}}" ng-style="{{itemstyle}}" header="item.title" subheader="item.subtitle" img="item.img" imgclass="imgclass"></thumbnail>'),a.put("efg.componentDirective.tpl.html",'<article class="component" ng-class="classes"><div class="container text-center"><header class="row" ng-if="header || subheader"><div class="col-md-12"><h2 ng-bind="header"></h2><p ng-bind="subheader" class="text-eased"></p></div></header><div class="row" ng-transclude></div></div></article>'),a.put("efg.sermonDirective.tpl.html",'<audio controls class="show"><source ng-repeat="source in sermon.source" ng-src="{{source.src | trustResource}}" type="{{source.type}}"></audio>')}]);
//# sourceMappingURL=main.min.js.map